/*! jQuery Activity Timer plugin 0.0.4 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){return+new Date}var c={startImmediately:!0,delay:5e3,events:"keydown DOMMouseScroll mousewheel mousemove mousedown touchstart touchmove MSPointerDown MSPointerMove"},d=1e3/60;function e(b,c,d){this._element=b,this._events=d,this._elapsedTime=0,this._remainingTime=0,this._time=0,this.delay=c,this.idle=!1,this.running=!1,this.paused=!1,this.callbacks={onUserEvent:a.proxy(this.onUserEvent,this),onTimer:a.proxy(this.onTimer,this)},a(this._element).on(this._events,this.callbacks.onUserEvent),a(this._element).data("activityTimer",this)}return a.extend(e.prototype,{getElapsedTime:function(){return this.paused?this._elapsedTime:this._time>0?b()-this._time:0},getRemainingTime:function(){return this._time>0?this.delay-this.getElapsedTime():0},destroy:function(){a(this._element).data("activityTimer",null),this.stop(),a(this._element).off(this.events,this.callbacks.onUserEvent),this._element=null},start:function(){this.running||(this.running=!0,this._time=b(),this.paused&&(this._time-=this._elapsedTime,this.paused=!1),this.timerID=window.setInterval(this.callbacks.onTimer,d))},pause:function(){this.running&&(this.running=!1,this._elapsedTime=this.getElapsedTime(),this.paused=!0,this.timerID&&(window.clearInterval(this.timerID),this.timerID=null))},stop:function(){this.running&&(this.running=!1,this._time=0,this.timerID&&(window.clearInterval(this.timerID),this.timerID=null))},onUserEvent:function(c){this.idle&&(this.idle=!1,a(this._element).trigger("activityTimer.active",this)),this._time=b()},onTimer:function(){!this.idle&&this.getElapsedTime()>=this.delay&&(this.idle=!0,this._time=0,a(this._element).trigger("activityTimer.idle",this))}}),a.fn.activity=function(){var b,d=Array.prototype.slice.call(arguments,0),f={};return"string"===a.type(d[0])&&"destroy"===d[0]?(a.each(this,function(c,d){b=a(d).data("activityTimer"),b&&b.destroy()}),this):("number"===a.type(d[0])?f={delay:d[0]}:"object"===a.type(d[0])&&(f=d[0]),d.length>1&&"object"===a.type(d[1])&&(f=a.extend(f,d[1])),f=a.extend(c,f),a.each(this,function(c,d){b=a(d).data("activityTimer"),b&&b.destroy(),b=new e(d,f.delay,f.events),f.startImmediately&&b.start()}),this)},a.activity=function(){a.fn.activity.apply([document],arguments)},a.fn.activity});